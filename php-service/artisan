#!/usr/bin/env php
<?php
// Simple artisan helper: only supports `serve` and `seed`
require __DIR__ . '/bootstrap.php';

// Get command line (terminal) arguments
$argvCount = $argc;
$command = $argv[1] ?? null;

// Start PHP server
if ($command === 'serve') {
    // Like in nodejs: app.listen(8000, '127.0.0.1')
    $host = $argv[2] ?? '127.0.0.1:8000';
    echo "Starting server on http://$host\n";
    // Folder 'public' is the root for web server
    passthru("php -S $host -t public");
    exit;
}

// Seed (delete all data and re-populate) the database
if ($command === 'seed') {
    echo "Seeding database...\n";
    require_once __DIR__ . '/database/seeders/seed.php';
    exit;
}

echo "Usage: php artisan [serve|seed]\n";
exit(1);
